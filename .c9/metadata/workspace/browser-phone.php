{"filter":false,"title":"browser-phone.php","tooltip":"/browser-phone.php","undoManager":{"mark":18,"position":18,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":128,"column":0},"action":"insert","lines":["<?php","// @start snippet","include 'Services/Twilio/Capability.php';","","$accountSid = 'ACxxxxxxxxxxxxxxx';","$authToken  = 'xxxxxxxxxxxxxxxxx';","","$token = new Services_Twilio_Capability($accountSid, $authToken);","$token->allowClientOutgoing('APxxxxxxxxxxxxxxx');","$token->allowClientIncoming(\"alice\");","// @end snippet","?>","","<!DOCTYPE HTML>","<html>","\t<head>","\t\t<title>","\t\t\tTwilio Client Click to Call","\t\t</title>","\t\t<!-- @start snippet -->","\t\t<script type=\"text/javascript\" src=\"//static.twilio.com/libs/twiliojs/1.1/twilio.min.js\"></script>","\t\t<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"></script>","\t\t<script type=\"text/javascript\">","\t\t$(document).ready(function(){","","\t\t\tTwilio.Device.setup(\"<?php echo $token->generateToken();?>\");","\t\t\tvar connection=null;","\t\t\t","\t\t\t$(\"#call\").click(function() {  ","\t\t\t\tparams = { \"tocall\" : $('#tocall').val()};","\t\t\t\tconnection = Twilio.Device.connect(params);","\t\t\t});","\t\t\t$(\"#hangup\").click(function() {  ","\t\t\t\tTwilio.Device.disconnectAll();","\t\t\t});","","\t\t\tTwilio.Device.ready(function (device) {","\t\t\t\t$('#status').text('Ready to start call');","\t\t\t});","","\t\t\tTwilio.Device.incoming(function (conn) {","\t\t\t\tif (confirm('Accept incoming call from ' + conn.parameters.From + '?')){","\t\t\t\t\tconnection=conn;","\t\t\t\t    conn.accept();","\t\t\t\t}","\t\t\t});","","\t\t\tTwilio.Device.offline(function (device) {","\t\t\t\t$('#status').text('Offline');","\t\t\t});","","\t\t\tTwilio.Device.error(function (error) {","\t\t\t\t$('#status').text(error);","\t\t\t});","","\t\t\tTwilio.Device.connect(function (conn) {","\t\t\t\t$('#status').text(\"Successfully established call\");","\t\t\t\ttoggleCallStatus();","\t\t\t});","","\t\t\tTwilio.Device.disconnect(function (conn) {","\t\t\t\t$('#status').text(\"Call ended\");","\t\t\t\ttoggleCallStatus();","\t\t\t});","\t\t\t","\t\t\tfunction toggleCallStatus(){","\t\t\t\t$('#call').toggle();","\t\t\t\t$('#hangup').toggle();","\t\t\t\t$('#dialpad').toggle();","\t\t\t}","","\t\t\t$.each(['0','1','2','3','4','5','6','7','8','9','star','pound'], function(index, value) { ","\t\t    \t$('#button' + value).click(function(){ ","\t\t\t\t\tif(connection) {","\t\t\t\t\t\tif (value=='star')","\t\t\t\t\t\t\tconnection.sendDigits('*')","\t\t\t\t\t\telse if (value=='pound')","\t\t\t\t\t\t\tconnection.sendDigits('#')","\t\t\t\t\t\telse","\t\t\t\t\t\t\tconnection.sendDigits(value)","\t\t\t\t\t\treturn false;","\t\t\t\t\t} ","\t\t\t\t\t});","\t\t\t});","","","\t\t});","","\t\t</script>","\t\t<!-- @end snippet -->","\t</head>","\t<body>","\t\t<div align=\"center\">","\t\t\t<!-- @start snippet -->","\t\t\tNumber to call: <input type=\"text\" id=\"tocall\" value=\"\">","\t\t\t<input type=\"button\" id=\"call\" value=\"Start Call\"/>","\t\t\t<input type=\"button\" id=\"hangup\" value=\"Hangup Call\" style=\"display:none;\"/>","\t\t\t<div id=\"status\">","\t\t\t\tOffline","\t\t\t</div>","\t\t\t<div id=\"dialpad\" style=\"display:none;\">","\t\t\t\t<table>","\t\t\t\t<tr>","\t\t\t\t<td><input type=\"button\" value=\"1\" id=\"button1\"></td>","\t\t\t\t<td><input type=\"button\" value=\"2\" id=\"button2\"></td>","\t\t\t\t<td><input type=\"button\" value=\"3\" id=\"button3\"></td>","\t\t\t\t</tr>","\t\t\t\t<tr>","\t\t\t\t<td><input type=\"button\" value=\"4\" id=\"button4\"></td>","\t\t\t\t<td><input type=\"button\" value=\"5\" id=\"button5\"></td>","\t\t\t\t<td><input type=\"button\" value=\"6\" id=\"button6\"></td>","\t\t\t\t</tr>","\t\t\t\t<tr>","\t\t\t\t<td><input type=\"button\" value=\"7\" id=\"button7\"></td>","\t\t\t\t<td><input type=\"button\" value=\"8\" id=\"button8\"></td>","\t\t\t\t<td><input type=\"button\" value=\"9\" id=\"button9\"></td>","\t\t\t\t</tr>","\t\t\t\t<tr>","\t\t\t\t<td><input type=\"button\" value=\"*\" id=\"buttonstar\"></td>","\t\t\t\t<td><input type=\"button\" value=\"0\" id=\"button0\"></td>","\t\t\t\t<td><input type=\"button\" value=\"#\" id=\"buttonpound\"></td>","\t\t\t\t</tr>","\t\t\t\t</table>","\t\t\t</div>","\t\t\t<!-- @end snippet -->","\t\t</div>","\t</body>","</html>",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":11},"end":{"row":2,"column":12},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":12},"end":{"row":2,"column":13},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":13},"end":{"row":2,"column":14},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":14},"end":{"row":2,"column":15},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":15},"end":{"row":2,"column":16},"action":"insert","lines":["-"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":16},"end":{"row":2,"column":17},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":17},"end":{"row":2,"column":18},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":18},"end":{"row":2,"column":19},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":19},"end":{"row":2,"column":20},"action":"insert","lines":["-"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":21},"end":{"row":2,"column":22},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":22},"end":{"row":2,"column":23},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":23},"end":{"row":2,"column":24},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":24},"end":{"row":2,"column":25},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":25},"end":{"row":2,"column":26},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":26},"end":{"row":2,"column":27},"action":"insert","lines":["/"]}]}]]},"ace":{"folds":[],"scrolltop":1217,"scrollleft":0,"selection":{"start":{"row":5,"column":34},"end":{"row":5,"column":34},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":63,"state":"js-start","mode":"ace/mode/php"}},"timestamp":1422831057359,"hash":"728e8ab678e6d4d60cae9a8478b8b7a3625c0c1d"}